<ion-content padding>
  <ion-refresher class="refresh" slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="crescent">
    </ion-refresher-content>
  </ion-refresher>
  <div class="wrapper-content">
    <ion-card-header>
      <ion-row>
        <ion-col size="12">
          <div class="title">
            <ion-icon class="icon-users" ios="ios-people" md="md-people"></ion-icon>
            <h3>List of Candidates</h3>
          </div>
        </ion-col>
      </ion-row>

      <ion-row class="filter-row" *ngIf="!noCandidatesAvailable">
        <ion-col size="6">
          <div class="btn-order">
            <div class="search-container">
              <!-- <ion-input #test class="no-padding"></ion-input> -->
              <ion-item class="search-input">
                <ion-input placeholder="Search by last name..." type="text" #name
                  (keyup.enter)="searchByLastName(name.value)"></ion-input>
              </ion-item>
              <ion-button (click)="searchByLastName(name.value)" class="btn btn--search" color="dark" size="small">
                <ion-icon name="search"></ion-icon>
              </ion-button>
            </div>
          </div>
        </ion-col>

        <ion-col size="6" class="ion-padding btn-order">
          <div class="btn-asc ion-padding">
            <ion-button (click)="getCandidateByAsc()" class="btn" color="light" size="small">
              <ion-icon name="arrow-up"></ion-icon>
            </ion-button>
          </div>
          <div class="btn-desc ion-padding-top ion-padding-bottom ion-padding-end">
            <ion-button (click)="getCandidateByDesc()" class="btn" color="light" size="small">
              <ion-icon name="arrow-down"></ion-icon>
            </ion-button>
          </div>
        </ion-col>
      </ion-row>
    </ion-card-header>
    <div class="candidateNotFound" *ngIf="!candidateNotFound">
      <ion-card-content *ngIf="!noCandidatesAvailable">
        <ion-item class="candidate-item" (click)="routeTo(candidateVenueJob.candidate.candidateId)"
          *ngFor="let candidateVenueJob of candidateVenueJobsLists">
          <ion-avatar *ngIf="candidateVenueJob.candidate.gender == 'Male'" slot="start">
            <img src="../../../assets/img/avatar_male.jpg" />
          </ion-avatar>
          <ion-avatar *ngIf="candidateVenueJob.candidate.gender=='Female'" slot="start">
            <img src="../../../assets/img/avatar_female.jpg" />
          </ion-avatar>
          <ion-label class="ion-text-wrap">
            <h5><b>{{candidateVenueJob.candidate.lastName}} {{candidateVenueJob.candidate.firstName}}</b></h5>
            <p><b>Level:</b> {{candidateVenueJob.candidate.currentLevel}}</p>
            <p>
              <b>Available from:</b>
              {{candidateVenueJob.candidate.availabilityDate}}
            </p>
          </ion-label>
          <ion-label slot="end">
            <p><b>Venue:</b> {{candidateVenueJob.venueJob.venue.venueName}}</p>
            <p><b>Job Applied:</b> {{candidateVenueJob.venueJob.job.title}}</p>
            <p><b>Job Type:</b> {{candidateVenueJob.candidate.jobType}}</p>
          </ion-label>
        </ion-item>
        <!-- <ion-item class="candidate-item" [routerLink]="['/candidate-details']" routerLinkActive="router-link-active">
        <ion-avatar slot="start">
          <img src="../../../assets/img/avatar_female.jpg" />
        </ion-avatar>
        <ion-label>
          <h5>Maliyah Sheppard</h5>
          <p>dolor sit amet</p>
          <p>consectetur adipiscing elit. Duis ut urna neque.</p>
        </ion-label>
      </ion-item> -->

      </ion-card-content>
    </div>
    <ion-card>
      <ion-card-content *ngIf="noCandidatesAvailable">
        <img class="not-available" src="../../../assets/img/Not Available/no-entry.png">
      </ion-card-content>
    </ion-card>

    <ion-row *ngIf="candidateNotFound">
      <ion-col size="12" class="ion-padding">
        <img class="not-found" src="../../../assets/img/Not Available/candidate-not-found.png">
      </ion-col>
    </ion-row>

    <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
      <ion-infinite-scroll-content
        loadingSpinner="crescent"
        loadingText="Loading more candidates...">
      </ion-infinite-scroll-content>
    </ion-infinite-scroll>

    <ion-row>
      <ion-col size="12" class="ion-padding">
        <div class="x" *ngIf="!candidateNotFound">
          <p class="ion-float-center" *ngIf="!noCandidatesAvailable">
            Total number of candidates: {{countCandidates}}
          </p>
        </div>
        <ion-button class="btn ion-float-right" color="light" [routerLink]="['/home']"
          routerLinkActive="router-link-active">
          <ion-icon name="arrow-back"></ion-icon>Back
        </ion-button>
      </ion-col>
    </ion-row>
  </div>

</ion-content>